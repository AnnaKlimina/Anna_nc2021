let menuIcon=document.querySelector(".page-header__menu-icon");function closeMenu(e){if(e.target.classList.contains("menu-list__item")&&!e.target.closest(".menu-container")?.classList.contains("_user-menu")){let e=document.querySelector(".page-header__menu-icon");e.style.transform="rotate(90deg)"===e.style.transform?"rotate(0deg)":"rotate(90deg)"}Array.from(document.querySelectorAll(".menu-container")).forEach((e=>e.style.width=0))}async function navigate(e){let t,a=e.target.state?.currentPage??e.target.dataset.menuLink??e.currentTarget.dataset.menuLink??e.target.closest(".change-page-button")?.dataset.menuLink;switch(document.documentElement.scrollTop=0,a){case"major-page":createMajorPage();break;case"news-page":createNewsPage();break;case"books-page":if(t=await fetch("https://my-library-project-server.herokuapp.com/library",{method:"GET",headers:{Accept:"application/json"}}),!t.ok)return void alert(t.status);library=await t.json(),createBooksPage(library,"books-page",!0);let a=new CustomEvent("load-cite-block");window.dispatchEvent(a);break;case"current-book-page":createCurrentBookPage(...e.target.closest("[data-book]").dataset.book.split(","));break;case"reading-page":createReadingPage();break;case"sign-in-page":showForm("sign-in")(e);break;case"sign-up-page":showForm("sign-up")(e);break;case"user-library-page":let r;if(t=await fetch("https://my-library-project-server.herokuapp.com/user_library?login="+document.querySelector(".authorization-block__user-login").textContent),!t.ok)return void alert(t.status);r=await t.json(),createBooksPage(r,"user-library-page");break;case"user-settings-page":createSettingPage();break;case"sign-out":signOut(),e.stopImmediatePropagation()}}function changePage(e){if(e.target.classList.contains("menu-list__item")||e.target.classList.contains("change-page-button")||e.currentTarget.classList.contains("change-page-button")||e.target.closest(".change-page-button")){closeMenu(e);let t=document.querySelector(".main-page");if(t.dataset.currentPage===e.target.dataset.menuLink||t.dataset.currentPage===e.currentTarget.dataset.menuLink)return;navigate(e)}}menuIcon.addEventListener("click",(function(e){menuIcon.style.transform="rotate(90deg)"===menuIcon.style.transform?"rotate(0deg)":"rotate(90deg)";let t=document.querySelector(".menu-container");t.style.width=0===t.clientWidth?"12rem":0})),document.addEventListener("click",(function(e){if(e.target.closest(".authorization-block__icon")){let e=document.querySelector("._user-menu");e.style.width=0===e.clientWidth?"12rem":0}}));